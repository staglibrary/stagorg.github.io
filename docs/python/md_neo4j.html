<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STAG Python: STAG and Neo4j</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
</script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript">
    DoxygenAwesomeInteractiveToc.init()
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ginger.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">STAG Python
   </div>
   <div id="projectbrief">Spectral Toolkit of Algorithms for Graphs</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KJQKRESXE4"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-KJQKRESXE4');
</script>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_neo4j.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">STAG and Neo4j </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The <a class="el" href="classstag_1_1neo4j_1_1Neo4jGraph.html" title="Represent a neo4j database as a stag.graph.LocalGraph object.">stag.neo4j.Neo4jGraph</a> object provides a convenient interface with Neo4j, a popular graph database. This allows graph algorithms to be executed directly on a graph stored in the database.</p>
<p>This tutorial will give a quick introduction to Neo4j and demonstrate how to run your first graph algorithms on a graph stored in Neo4j. In this tutorial, we will connect to a Neo4j database running in the AuraDB cloud service. The STAG library can also connect to a database running locally.</p>
<h1><a class="anchor" id="autotoc_md9"></a>
Setting up a Neo4j Database</h1>
<p>You should begin by following the introductory steps in the <a href="https://neo4j.com/">Neo4j documentation</a> to set up a database in the cloud using the AuraDB service. We recommend first experimenting with the provided 'Movie' dataset. You will need to note the following information when you create the new database instance.</p>
<ul>
<li>The generated password for accessing the database instance.</li>
<li>The connection URI.</li>
</ul>
<h1><a class="anchor" id="autotoc_md10"></a>
Connecting to the Database with STAG</h1>
<p>Once the database instance is up and running, you can connect to it with the following code.</p>
<div class="fragment"><div class="line"><span class="keyword">import</span> <a class="code hl_namespace" href="namespacestag_1_1neo4j.html">stag.neo4j</a></div>
<div class="line">connection_uri = <span class="stringliteral">&quot;&lt;your connection URI&gt;&quot;</span></div>
<div class="line">username = <span class="stringliteral">&quot;neo4j&quot;</span></div>
<div class="line">password = <span class="stringliteral">&quot;&lt;your password&gt;&quot;</span></div>
<div class="line">g = <a class="code hl_class" href="classstag_1_1neo4j_1_1Neo4jGraph.html">stag.neo4j.Neo4jGraph</a>(connection_uri, username, password)</div>
<div class="ttc" id="aclassstag_1_1neo4j_1_1Neo4jGraph_html"><div class="ttname"><a href="classstag_1_1neo4j_1_1Neo4jGraph.html">stag.neo4j.Neo4jGraph</a></div><div class="ttdoc">Represent a neo4j database as a stag.graph.LocalGraph object.</div><div class="ttdef"><b>Definition:</b> neo4j.py:26</div></div>
<div class="ttc" id="anamespacestag_1_1neo4j_html"><div class="ttname"><a href="namespacestag_1_1neo4j.html">stag.neo4j</a></div><div class="ttdef"><b>Definition:</b> neo4j.py:1</div></div>
</div><!-- fragment --><p>Then, we can test that the connection was successful by querying the database. This command will return the degree of the node with ID 0.</p>
<div class="fragment"><div class="line">print(g.degree(0))</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md11"></a>
Finding Clusters in the Graph</h1>
<p>Once we have connected successfully to the database, we can find a cluster in the data.</p>
<div class="fragment"><div class="line"><span class="keyword">import</span> <a class="code hl_namespace" href="namespacestag_1_1cluster.html">stag.cluster</a></div>
<div class="line">cluster = <a class="code hl_function" href="namespacestag_1_1cluster.html#af7f8a290abdd805c14934855a3e8fc6e">stag.cluster.local_cluster</a>(g, 0, 100)</div>
<div class="ttc" id="anamespacestag_1_1cluster_html"><div class="ttname"><a href="namespacestag_1_1cluster.html">stag.cluster</a></div><div class="ttdef"><b>Definition:</b> cluster.py:1</div></div>
<div class="ttc" id="anamespacestag_1_1cluster_html_af7f8a290abdd805c14934855a3e8fc6e"><div class="ttname"><a href="namespacestag_1_1cluster.html#af7f8a290abdd805c14934855a3e8fc6e">stag.cluster.local_cluster</a></div><div class="ttdeci">List[int] local_cluster(graph.LocalGraph g, int seed_vertex, float target_volume)</div><div class="ttdoc">Local clustering algorithm based on personalised Pagerank.</div><div class="ttdef"><b>Definition:</b> cluster.py:60</div></div>
</div><!-- fragment --><p>Then, assuming we are testing against the Neo4j movies dataset, we can display the cluster as follows.</p>
<div class="fragment"><div class="line"><span class="keywordflow">for</span> node <span class="keywordflow">in</span> cluster:</div>
<div class="line">    labels = g.query_node_labels(node)</div>
<div class="line">    <span class="keywordflow">if</span> <span class="stringliteral">&#39;Movie&#39;</span> <span class="keywordflow">in</span> labels:</div>
<div class="line">        print(g.query_property(node, <span class="stringliteral">&#39;title&#39;</span>))</div>
<div class="line">    <span class="keywordflow">elif</span> <span class="stringliteral">&#39;Person&#39;</span> <span class="keywordflow">in</span> labels:</div>
<div class="line">        print(g.query_property(node, <span class="stringliteral">&#39;name&#39;</span>))</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
